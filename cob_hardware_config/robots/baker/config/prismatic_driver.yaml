name: prismatic

sync:
  interval_ms: 10
  overflow: 0

defaults:
  eds_pkg: cob_hardware_config
  eds_file: "robots/common/Elmo.dcf"
  
  # canopen_chain_node settings ..
  motor_allocator: canopen::Motor402::Allocator # select allocator for motor layer
  
  motor_layer:  # settings passed to motor layer (plugin-specific)
    switching_state: 4 # stop motor before switching state
   
  # !!!!!!!!!!!!!!!!!!!!!!!!!!!!! BEFORE UNCOMMENTING HOMIG VALUES MAKE SURE THAT SENSORS ARE PROPERLY CONNECTED TO THE DRIVE !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
  #dcf_overlay:
  #  #"6098": "17"      # homing method    
  #  #"6099sub1": "500" # homing speed during search for switch
  #  #"609A": "100000"  # homing acceleration
  #  #"607C" : "250"    # home offset   
  ################################################################################################################################################################
  
    
  eff_to_device: "rint(eff)" # torque
  eff_from_device: "obj6077" # torque actual value        
        
nodes:
  arm_joint_1:
    id: 127

    pos_to_device: "rint(pos * 4233.301975541)" # m -> halfdegree
    pos_from_device: "obj6064 / 4233.301975541" # actual position [halfdegree] -> m
    
    vel_to_device: "rint(vel * 4233.301975541)" # m/s -> halfdegree/s
    vel_from_device: "obj606C / 4233.301975541" # actual velocity [halfdegree/s] -> m/s
    - name: arm_joint_2
      id: 10
      pos_to_device: "rint(rad2deg(pos + 79.98883374526848)*1217.9553777880542)"
      pos_from_device: "deg2rad(obj6064)/1217.9553777880542 - 79.98883374526848"

    - name: arm_joint_3
      id: 20
      pos_to_device: "rint(rad2deg(pos))"
      pos_from_device: "deg2rad(obj6064)"


      - name: arm_joint_4
        id: 30
        pos_to_device: "rint((rad2deg(pos)+97.38247821073821)*1000)" #0.1 is the offset value
        pos_from_device: "deg2rad(obj6064)/1000 - 97.38247821073821"
        #pos_to_device: "(pos+ 8.570809981981798)*651000.8986 "
        #pos_from_device: "obj6064*(1.0/651000.8986) - 8.570809981981798"
